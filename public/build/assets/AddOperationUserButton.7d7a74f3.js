import{n as O,r as v,e as c,o as m,c as _,E as b,D as f,R as y,a as t,y as d,G as $,aF as k,A as n,O as P,B as w,b1 as q,K as g,C as h,al as F,U as Q}from"./app.e311c8d7.js";import{Q as H}from"./QSelect.78285059.js";import{Q as S}from"./QSlideTransition.8865272f.js";import{Q as T}from"./QRadio.df007502.js";import"./QItemLabel.17844741.js";import"./QCheckbox.7b391117.js";const L={class:"no-margin"},z={class:"colum q-gutter-lg"},G={class:"col"},K={class:"col"},M={key:0,class:"col"},J={key:0,class:"col"},W={class:"colum"},X=n("div",{class:"col flex flex-center"},[n("span",{class:"text-caption"}," Entosis Link")],-1),Y={class:"col"},ue={__name:"AddOperationUserButton",props:{operationID:Number,type:{type:Number,default:1},char:{type:Object,required:!1}},setup(B){const l=B;let C=O(),i=v(!1),U=v([{text:"Hacker",value:1},{text:"Support",value:5},{text:"Scout",value:2},{text:"FC",value:3},{text:"Command",value:4}]),s=v(),o=v(),r=v(),u=v(),x=c(()=>!!(o.value&&o.value.value==1)),V=()=>{i.value=!1,s.value=null,o.value=null,r.value=null,u.value=null},D=c(()=>{if(x.value){if(s.value&&o.value&&r.value&&u.value)return!0}else if(s.value&&o.value)return!0;return!1}),A=async()=>{l.type==1?await N():await I(),V()},N=async()=>{var p={user_id:C.user_id,operation_id:l.operationID,name:s.value,entosis:u.value,ship:r.value,role_id:o.value.value,user_status_id:1};await axios({method:"POST",url:"/api/newcampaignusers/"+l.operationID+"/"+C.user_id,withCredentials:!0,data:p,headers:{Accept:"application/json","Content-Type":"application/json"}})},I=async()=>{var p={user_id:C.user_id,operation_id:l.operationID,name:s.value,user_status_id:1,role_id:o.value.value,entosis:o.value.value!=1?null:u.value,ship:o.value.value!=1?null:r.value};await axios({method:"PUT",url:"/api/newcampaignusers/"+l.char.id+"/"+l.operationID,withCredentials:!0,data:p,headers:{Accept:"application/json","Content-Type":"application/json"}})},R=()=>{if(l.type==2){let p=l.char.userrole.id,e=l.char.userrole.role;s.value=l.char.name,o.value={value:p,text:e},r.value=l.char.ship,u.value=l.char.entosis}},j=c(()=>l.type==1?"Add Character":"Edit Character"),E=c(()=>l.type==1?"Add":"Update");return(p,e)=>(m(),_("div",null,[l.type==1?(m(),b(f,{key:0,color:"positive",icon:"fa-solid fa-plus",flat:"",label:"Char",onClick:e[0]||(e[0]=a=>i.value=!i.value)})):y("",!0),l.type==2?(m(),b(f,{key:1,color:"warning",icon:"fa-solid fa-edit",flat:"",round:"",padding:"none",size:"xs",onClick:e[1]||(e[1]=a=>i.value=!i.value)})):y("",!0),t(F,{onBeforeShow:e[8]||(e[8]=a=>h(R)()),onBeforeHide:e[9]||(e[9]=a=>h(V)()),class:"myRoundTop",modelValue:i.value,"onUpdate:modelValue":e[10]||(e[10]=a=>i.value=a),persistent:""},{default:d(()=>[t($,{class:"myRoundTop",flat:""},{default:d(()=>[t(k,{class:"bg-primary text-center"},{default:d(()=>[n("h5",L,P(j.value),1)]),_:1}),t(k,null,{default:d(()=>[n("div",z,[n("div",G,[t(w,{outlined:"",rounded:"",modelValue:s.value,"onUpdate:modelValue":e[2]||(e[2]=a=>s.value=a),type:"text",label:"Name"},null,8,["modelValue"])]),n("div",K,[t(H,{"option-label":"text","option-value":"value",outlined:"",rounded:"",modelValue:o.value,"onUpdate:modelValue":e[3]||(e[3]=a=>o.value=a),options:U.value,label:"Role"},null,8,["modelValue","options"])]),t(S,null,{default:d(()=>[x.value?(m(),_("div",M,[t(w,{outlined:"",rounded:"",modelValue:r.value,"onUpdate:modelValue":e[4]||(e[4]=a=>r.value=a),type:"text",label:"Ship"},null,8,["modelValue"])])):y("",!0)]),_:1}),t(S,null,{default:d(()=>[x.value?(m(),_("div",J,[n("div",W,[X,n("div",Y,[t(T,{modelValue:u.value,"onUpdate:modelValue":e[5]||(e[5]=a=>u.value=a),val:1,label:"Tech 1"},null,8,["modelValue"]),t(T,{modelValue:u.value,"onUpdate:modelValue":e[6]||(e[6]=a=>u.value=a),val:2,label:"Tech 2"},null,8,["modelValue"])])])])):y("",!0)]),_:1})])]),_:1}),t(q,{align:"center"},{default:d(()=>[g(t(f,{rounded:"",color:"positive",disable:!D.value,label:E.value,onClick:e[7]||(e[7]=a=>h(A)())},null,8,["disable","label"]),[[Q]]),g(t(f,{rounded:"",color:"negative",label:"Close"},null,512),[[Q]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}};export{ue as default};
