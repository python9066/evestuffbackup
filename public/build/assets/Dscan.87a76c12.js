import{d as b,u as K,i as W,ay as X,az as Y,a as Z,r as h,o as aa,b as ea,c as p,e as m,j as u,f as e,w as o,aA as la,aB as ta,C as T,B as na,q as x,_ as V,h as r,l as c,n as oa,aC as S,A as d,z as sa,aD as E,Q,aE as j,m as C}from"./app.95ebe2df.js";import{Q as da,a as w}from"./QTabPanels.0750bc2e.js";import{Q as ua}from"./QChip.b71958bc.js";const ca={class:"q-ma-md"},ia={class:"row q-gutter-lg"},ra={key:0,class:"col-9"},pa={class:"col-2"},ma={key:0,class:"col-auto"},va={class:"col text-h6"},fa={class:"col text-h6"},_a={class:"col text-h6"},ya={class:"col text-h6"},ha={key:0,class:"text-red"},ga={key:0},Sa={key:1},Ca={key:1,class:"text-red"},wa={class:"col-auto text-h6"},ka={class:"col-auto"},ba={class:"col"},Da={__name:"Dscan",setup(Ta){const k=b(()=>V(()=>import("./DscanTotal.29915e7f.js"),["assets/DscanTotal.29915e7f.js","assets/app.95ebe2df.js","assets/app.7b67968f.css"])),B=b(()=>V(()=>import("./DscanLocal.f4a6a9d8.js"),["assets/DscanLocal.f4a6a9d8.js","assets/app.95ebe2df.js","assets/app.7b67968f.css","assets/QImg.035082cb.js","assets/DscanLocal.c246d068.css"])),U=b(()=>V(()=>import("./index.e1cc97ef.js"),["assets/index.e1cc97ef.js","assets/app.95ebe2df.js","assets/app.7b67968f.css"]));let t=K();W("can"),X();let L=Y(),D=Z(),i=h(null),_=h(null),s=h(!1),v=h(null),f=h("total");aa(async()=>{document.title="Evestuff - Operations",i.value=L.params.link?L.params.link:null,Echo.private("dscanall").listen("DscanAllUpdate",l=>{l.flag.flag==1}),await z()}),ea(()=>{Echo.leave("dscansolo."+i.value),Echo.leave("dscanall")});let z=()=>{i.value&&(t.getDscan(i.value),Echo.private("dscansolo."+i.value).listen("dScanSoloUpdate",l=>{l.flag.flag==1,l.flag.flag==2&&(t.dScanLocalCorp=l.flag.message.corpsTotal,t.dScanLocalAlliance=l.flag.message.allianceTotal,t.updateLocalDscan(l.flag.message.soloLocal),console.log(l.flag.message.soloLocal))}))},N=p(()=>!!t.dScan),O=p(()=>t.dScan.system?t.dScan.system.system_name:"unknown"),R=p(()=>t.dScan.madeby?t.dScan.madeby.name:"unknown"),G=p(()=>t.dScan.updated_by?t.dScan.updated_by.name:"unknown"),P=p(()=>t.dScan.updated_at?t.dScan.updated_at:"unknown"),$=async()=>{s.value=!0;var l={dscan:_.value};await axios({method:"post",withCredentials:!0,data:l,url:"/api/dscan",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(a=>{s.value=!1,D.push({path:`/dscan/${a.data.link}`})})},q=async()=>{s.value=!0;var l={dscan:_.value};await axios({method:"post",withCredentials:!0,data:l,url:"/api/dscan/"+i.value,headers:{Accept:"application/json","Content-Type":"application/json"}}).then(a=>{s.value=!1,t.dScan=a.data.data.dscan,_.value=null})},I=async()=>{s.value=!0;var l={local:v.value};await axios({method:"post",withCredentials:!0,data:l,url:"/api/dscanlocal",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(a=>{s.value=!1,D.push({path:`/dscan/${a.data.link}`}),v.value=null,f.value="local"})},M=async()=>{s.value=!0;var l={local:v.value};await axios({method:"post",withCredentials:!0,data:l,url:"/api/dscanlocal/"+i.value,headers:{Accept:"application/json","Content-Type":"application/json"}}).then(a=>{s.value=!1,t.dScan=a.data.dscan,t.dScanLocalCorp=a.data.corpsTotal,t.dScanLocalAlliance=a.data.allianceTotal,v.value=null,f.value="local"})},F=l=>{if(!l)return 0;let a=l,y=new Date(a).getTimezoneOffset()*6e4;return Date.parse(a)-y},H=p(()=>i.value?"full-height justify-between":"q-gutter-lg full-height justify-end"),J=p(()=>{let l=70;return"height:"+(t.size.height-l+"px")});return(l,a)=>(r(),m("div",ca,[u("div",ia,[N.value?(r(),m("div",ra,[e(la,{dense:"",modelValue:f.value,"onUpdate:modelValue":a[0]||(a[0]=n=>f.value=n),class:"text-teal"},{default:o(()=>[c(t).dScan.locals?(r(),oa(S,{key:0,name:"local",label:"Local"})):T("",!0),e(S,{name:"total",label:"Total"}),e(S,{name:"onGrid",label:"On Grid"}),e(S,{name:"offGrid",label:"Off Grid"})]),_:1},8,["modelValue"]),e(da,{style:ta(J.value),modelValue:f.value,"onUpdate:modelValue":a[1]||(a[1]=n=>f.value=n),animated:""},{default:o(()=>[e(w,{name:"local"},{default:o(()=>[e(c(B))]),_:1}),e(w,{name:"total"},{default:o(()=>[e(c(k),{type:1})]),_:1}),e(w,{name:"onGrid"},{default:o(()=>[e(c(k),{type:2})]),_:1}),e(w,{name:"offGrid"},{default:o(()=>[e(c(k),{type:3})]),_:1})]),_:1},8,["style","modelValue"])])):T("",!0),u("div",pa,[u("div",{class:na([H.value,"column"])},[i.value?(r(),m("div",ma,[e(x,{class:"my-card"},{default:o(()=>[u("div",va,"System: "+d(O.value),1),u("div",fa,"Created By: "+d(R.value),1),u("div",_a,"Edited By: "+d(G.value),1),u("div",ya,[sa(" Last Updated: "),e(c(U),{class:"q-pl-sm","emit-events":!1,time:c(F)(P.value),interval:1e3},{default:o(({hours:n,minutes:y,seconds:g,days:A})=>[n<=1&&A==0?(r(),m("span",ha,[e(ua,{class:"",filter:"",pill:"",clickable:"",color:"primary","text-color":"white"},{default:o(()=>[n==1?(r(),m("span",ga,d(n)+":"+d(y)+":"+d(g),1)):(r(),m("span",Sa,d(y)+":"+d(g),1))]),_:2},1024)])):(r(),m("span",Ca,[u("span",null,d(A)+":"+d(n)+":"+d(y)+":"+d(g),1)]))]),_:1},8,["time"])])]),_:1})])):T("",!0),u("div",wa,[e(x,{class:"my-card myRoundTop"},{default:o(()=>[e(E,null,{default:o(()=>[e(Q,{modelValue:_.value,"onUpdate:modelValue":a[2]||(a[2]=n=>_.value=n),type:"textarea",label:"Dscan"},null,8,["modelValue"])]),_:1}),e(j,{align:"center"},{default:o(()=>[e(C,{rounded:"",color:"primary",label:"New",loading:s.value,onClick:a[3]||(a[3]=n=>c($)())},null,8,["loading"]),e(C,{rounded:"",color:"secondary",label:"Update",loading:s.value,onClick:a[4]||(a[4]=n=>c(q)())},null,8,["loading"])]),_:1})]),_:1})]),u("div",ka,[u("div",ba,[e(x,{class:"my-card myRoundTop"},{default:o(()=>[e(E,null,{default:o(()=>[e(Q,{modelValue:v.value,"onUpdate:modelValue":a[5]||(a[5]=n=>v.value=n),type:"textarea",label:"Local"},null,8,["modelValue"])]),_:1}),e(j,{align:"center"},{default:o(()=>[e(C,{rounded:"",color:"primary",label:"New",loading:s.value,onClick:a[6]||(a[6]=n=>c(I)())},null,8,["loading"]),e(C,{rounded:"",color:"secondary",label:"Update",loading:s.value,onClick:a[7]||(a[7]=n=>c(M)())},null,8,["loading"])]),_:1})]),_:1})])])],2)])])]))}};export{Da as default};
