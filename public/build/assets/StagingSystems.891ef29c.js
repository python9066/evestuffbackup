import{d as u,r as m,u as R,o as $,b as P,c as w,e as y,j as o,f as n,w as s,l,g as V,_ as f,h as d,n as _,p as A,q as W,s as I,F as N,t as z,v as F,x as M,y as O,z as U,A as v,m as h,C as G,G as J,R as H}from"./app.a7fb0a48.js";import{Q as K,a as X}from"./QTable.07890d88.js";import{Q as g}from"./QTd.c7978105.js";import"./QSeparator.9b72d10d.js";import"./QMarkupTable.10847913.js";import"./QSelect.cb58c65f.js";import"./QItemLabel.7647bce7.js";import"./QLinearProgress.67ac3128.js";import"./QCheckbox.13295f89.js";import"./use-checkbox.5e615926.js";const Y={class:"q-ma-md"},Z={class:"row justify-center"},ee={class:"col-10"},te={class:"row justify-between full-width flex-center q-pt-xs myRoundTop bg-primary"},ae=o("div",{class:"col-auto"},null,-1),se=o("div",{class:"col-auto"},[o("span",{class:"text-h4"},"Staging")],-1),le={class:"col-auto"},oe=o("div",{class:"row"},[o("div",{class:"col"},[o("span",{class:"myFont"},"Webway")])],-1),ne={class:"row"},re={class:"col"},ie={key:1},de={class:"row q-gutter-sm justify-end"},ce={class:"col-auto"},ue={class:"col-auto"},Ce={__name:"StagingSystems",setup(me){V(e=>({efad5154:L.value}));const p=u(()=>f(()=>import("./StagingEditPannel.1206af62.js"),["assets/StagingEditPannel.1206af62.js","assets/app.a7fb0a48.js","assets/app.4fce15f2.css","assets/QSelect.cb58c65f.js","assets/QItemLabel.7647bce7.js"])),x=u(()=>f(()=>import("./StagingDscan.7e3d922d.js"),["assets/StagingDscan.7e3d922d.js","assets/app.a7fb0a48.js","assets/app.4fce15f2.css"])),C=u(()=>f(()=>import("./SoloCampaginWebWay.bcc0d853.js"),["assets/SoloCampaginWebWay.bcc0d853.js","assets/app.a7fb0a48.js","assets/app.4fce15f2.css"]));let k=m({sortBy:"progress",descending:!1,page:1,rowsPerPage:0}),a=R();$(async()=>{document.title="Evestuff - Staging Systems",await a.getWebwayStartSystems(),await a.getStagingSystemInfo(),await a.getSystemList(),Echo.private("stagingsystem").listen("StagingSystemUpdate",e=>{e.flag.flag==1&&a.updateStagingSystem(e.flag.message),e.flag.flag==2&&a.deleteStagingSystem(e.flag.message)})}),P(()=>{Echo.leave("stagingsystem")});let Q=m(!1),q=async e=>{await axios({method:"delete",url:"api/staging/"+e,withCredentials:!0,headers:{Accept:"application/json","Content-Type":"application/json"}})},E=w(()=>!!(a.webwayStartSystems&&a.webwayStartSystems.length>0)),B=e=>{var r=j.value.filter(t=>t.value!=e);return r},T=e=>{var r={value:e.value,text:e.text};Q.value=!1,a.updateWebwaySelectedStartSystem(r)},j=w(()=>{var e=a.webwayStartSystems,r={value:30004759,text:"1DQ1-A"};return e.push(r),e.sort(function(t,i){return t.value-i.value||t.text.localeCompare(i.text)}),e}),b=e=>{if(e.system.webway.length>0){var r=e.system.webway,t=r.filter(c=>c.start_system_id==a.webwaySelectedStartSystem.value);if(t.length>0){var i=t[0].jumps;return i}else return null}else return null},S=e=>{if(e.system.webway.length>0){var r=e.system.webway,t=r.filter(c=>c.start_system_id==a.webwaySelectedStartSystem.value);if(t.length>0){var i=t[0].webway;return i}else return null}else return null},D=m([{name:"webway",align:"left",required:!1,label:"Webway",style:"width: 5%",classes:"text-no-wrap",field:e=>e.id,format:e=>`${e}`,sortable:!1},{name:"name",align:"left",required:!1,label:"Name",style:"width: 15%",classes:"text-no-wrap",field:e=>e.name,format:e=>`${e}`,sortable:!1},{name:"region",required:!0,align:"left",style:"width: 7%",label:"Region",classes:"text-no-wrap",field:e=>e.system.constellation.region.region_name,format:e=>`${e}`,sortable:!1,filter:!0},{name:"constellation",required:!0,align:"left",style:"width: 7%",label:"Constellation",classes:"text-no-wrap",field:e=>e.system.constellation.constellation_name,format:e=>`${e}`,sortable:!1,filter:!0},{name:"system",required:!0,align:"left",style:"width: 7%",label:"System",classes:"text-no-wrap",field:e=>e.system.system_name,format:e=>`${e}`,sortable:!1,filter:!0},{name:"dscan",required:!0,align:"center",label:"Dscan",classes:"text-no-wrap",field:e=>e.id,format:e=>`${e}`,sortable:!1,filter:!0},{name:"actions",required:!0,align:"right",label:"",classes:"text-no-wrap",field:e=>e.id,format:e=>`${e}`,sortable:!1,filter:!0}]),L=w(()=>{let e=30;return a.size.height-e+"px"});return(e,r)=>(d(),y("div",Y,[o("div",Z,[o("div",ee,[n(K,{title:"Connections",class:"myTableStagingSystem myRound bg-webBack",rows:l(a).stagingSystems,columns:D.value,"table-class":" text-webway","table-header-class":" text-weight-bolder","row-key":"id",dark:"",dense:"","hide-pagination":"",ref:"tableRef",rounded:"",pagination:k.value},{top:s(t=>[o("div",te,[ae,se,o("div",le,[n(l(p))])])]),"header-cell-webway":s(t=>[n(X,{props:t},{default:s(()=>[oe,o("div",ne,[o("div",re,[E.value?(d(),_(h,{key:0,color:"webChip",size:"sm",label:l(a).webwaySelectedStartSystem.text},{default:s(()=>[n(A,null,{default:s(()=>[n(W,{class:"my-card"},{default:s(()=>[n(I,{bordered:""},{default:s(()=>[(d(!0),y(N,null,z(l(B)(l(a).webwaySelectedStartSystem.value),(i,c)=>F((d(),_(M,{clickable:"",key:c,onClick:we=>l(T)(i)},{default:s(()=>[n(O,null,{default:s(()=>[U(v(i.text),1)]),_:2},1024)]),_:2},1032,["onClick"])),[[J],[H]])),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["label"])):(d(),y("span",ie,v(l(a).webwaySelectedStartSystem.text),1))])])]),_:2},1032,["props"])]),"body-cell-webway":s(t=>[n(g,{props:t},{default:s(()=>[l(b)(t.row)&&l(S)(t.row)?(d(),_(l(C),{key:0,jumps:l(b)(t.row),web:l(S)(t.row)},null,8,["jumps","web"])):G("",!0)]),_:2},1032,["props"])]),"body-cell-dscan":s(t=>[n(g,{props:t},{default:s(()=>[n(l(x),{item:t.row},null,8,["item"])]),_:2},1032,["props"])]),"body-cell-actions":s(t=>[n(g,{props:t},{default:s(()=>[o("div",de,[o("div",ce,[n(l(p),{edit:!0,item:t.row},null,8,["item"])]),o("div",ue,[n(h,{color:"negative",icon:"fa-solid fa-trash-alt",size:"sm",round:"",padding:"none",flat:"",onClick:i=>l(q)(t.row.id)},null,8,["onClick"])])])]),_:2},1032,["props"])]),_:1},8,["rows","columns","pagination"])])])]))}};export{Ce as default};
