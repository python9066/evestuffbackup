import{u as Y,aA as P,i as G,r as y,c as f,h as o,e as h,j as d,f as c,l as m,m as g,w as t,q as E,aG as Q,A as $,z as n,B as H,C as s,n as r,b2 as J,D as K,aI as W,v as X,ah as Z,F as ee,G as te}from"./app.ed7db7fc.js";import{a as i}from"./QSelect.1655d965.js";import{Q as ae}from"./QTd.ff6de4f9.js";import{Q as oe}from"./QTable.238b17fe.js";import"./QItemLabel.e92e7759.js";import"./QSeparator.f7b1f111.js";import"./QMarkupTable.108a3ec1.js";import"./QLinearProgress.26abd8fa.js";import"./QCheckbox.99bdbe93.js";import"./use-checkbox.8afa37ee.js";const se={class:"no-margin"},le={class:"column"},ne={class:"row justify-between"},re={class:"co-autol"},ie={key:0,class:"col-auto"},ue={key:0},de={key:1},ce=["src"],we={__name:"StationSheetInfo",props:{station:Object},setup(R){const e=R;let q=Y();const S=P();let b=G("can"),x=y({sortBy:"item",descending:!1,page:1,rowsPerPage:0}),C=y(!1),F=()=>{v.value=!0,N()},M=f(()=>e.station.r_cored==1?"Yes":"No"),I=f(()=>M.value=="Yes"?"text-green":"text-red"),N=()=>{e.station.r_fitted=="Fitted"&&(C.value=!0)},B=()=>C.value==!0,T=f(()=>!!(b("request_recon_task")&&e.station.r_research!=null)),D=()=>!!e.station.system.task_flag,V=()=>{var l="https://recon.gnf.lt/structures/"+e.station.r_hash+"/view",a=window.open(l,"_blank");a.focus()},z=l=>"https://images.evetech.net/types/"+l.id+"/icon",A=()=>{var l={system_name:e.station.system.system_name,system_id:e.station.system_id,station_id:e.station.id,structure_name:e.station.name,username:q.user_name,show_on_main:e.station.show_on_main,show_on_chill:e.show_on_chill};axios({method:"post",url:"api/taskrequest",withCredentials:!0,data:l,headers:{Accept:"application/json","Content-Type":"application/json"}}),S.notify({type:"info",message:"Request Sent"})},j=f(()=>{const l=new Date(e.station.r_updated_at),a=new Date,u=(a.getFullYear()-l.getFullYear())*12,_=a.getMonth()-l.getMonth();return u+_>1}),O=f(()=>{if(e.station.r_updated_at!=null){const l=new Date(e.station.r_updated_at),a=Math.floor((new Date-l)/1e3),u=Math.floor(a/31536e3);if(u>=1)return`${u} year${u===1?"":"s"} ago`;const _=Math.floor(a/2592e3);if(_>=1)return`${_} month${_===1?"":"s"} ago`;const p=Math.floor(a/86400);if(p>=1)return`${p} day${p===1?"":"s"} ago`;const k=Math.floor(a/3600);if(k>=1)return`${k} hour${k===1?"":"s"} ago`;const w=Math.floor(a/60);return w>=1?`${w} minute${w===1?"":"s"} ago`:`${a} second${a===1?"":"s"} ago`}else return"Never"}),L=y([{name:"icon",align:"left",required:!1,label:"",classes:"text-no-wrap q-pa-none",field:l=>l.id,format:l=>`${l}`,sortable:!1},{name:"item",required:!0,align:"left",label:"Items",classes:"text-no-wrap ",field:l=>l.item_name,format:l=>`${l}`,sortable:!1}]),v=y(!1),U=f(()=>{let l=325;return q.size.height-l+"px"});return(l,a)=>(o(),h(ee,null,[d("div",null,[c(g,{color:"primary",icon:"fa-solid fa-circle-info",padding:"none",round:"",flat:"",onClick:a[0]||(a[0]=u=>m(F)())})]),c(Z,{modelValue:v.value,"onUpdate:modelValue":a[4]||(a[4]=u=>v.value=u)},{default:t(()=>[c(E,{class:"myRoundTop",style:{width:"500px"}},{default:t(()=>[c(Q,{class:"bg-primary text-h5 text-center"},{default:t(()=>[d("span",se,$(e.station.name),1)]),_:1}),c(Q,null,{default:t(()=>[d("div",le,[d("div",null,[d("div",ne,[d("div",re,[n(" Cored: "),d("strong",{class:H(I.value)},$(M.value),3)]),T.value?(o(),h("div",ie,[c(g,{outline:"",rounded:"",class:"myOutLineButton",size:"sm",color:"secondary",label:"View On Recon Tool",onClick:a[1]||(a[1]=u=>m(V)())})])):s("",!0)])]),d("div",null,[n(" Last Updated: "+$(O.value)+" ",1),m(b)("request_recon_task")&&!m(D)()&&j.value?(o(),r(g,{key:0,outline:"",rounded:"",class:"myOutLineButton",size:"sm",color:"secondary",label:"Request Update",onClick:a[2]||(a[2]=u=>m(A)())})):s("",!0),m(b)("request_recon_task")&&m(D)()?(o(),r(i,{key:1,outline:"",rounded:"",class:"myOutLineButton",size:"sm",color:"secondary",label:"Request Made"})):s("",!0)]),d("div",null,[m(B)()?(o(),h("div",ue,[e.station.r_anti_cap==1?(o(),r(i,{key:0,small:"",color:"red",class:""},{default:t(()=>[n(" anti cap ")]),_:1})):s("",!0),e.station.r_anti_subcap==1?(o(),r(i,{key:1,small:"",color:"red"},{default:t(()=>[n(" anti subcap ")]),_:1})):s("",!0),e.station.r_dooms_day==1?(o(),r(i,{key:2,small:"",color:"red"},{default:t(()=>[n(" dooms day ")]),_:1})):s("",!0),e.station.r_point_defense==1?(o(),r(i,{key:3,small:"",color:"red"},{default:t(()=>[n(" point defense ")]),_:1})):s("",!0),e.station.r_biochemical==1?(o(),r(i,{key:4,small:"",color:"blue"},{default:t(()=>[n(" biochemical ")]),_:1})):s("",!0),e.station.r_capital_shipyard==1?(o(),r(i,{key:5,small:"",color:"blue"},{default:t(()=>[n(" capital shipyard ")]),_:1})):s("",!0),e.station.r_cloning==1?(o(),r(i,{key:6,small:"",color:"blue"},{default:t(()=>[n(" cloning ")]),_:1})):s("",!0),e.station.r_composite==1?(o(),r(i,{key:7,small:"",color:"blue"},{default:t(()=>[n(" composite ")]),_:1})):s("",!0),e.station.r_guide_bombs==1?(o(),r(i,{key:8,small:"",color:"red"},{default:t(()=>[n(" guide bombs ")]),_:1})):s("",!0),e.station.r_hyasyoda==1?(o(),r(i,{key:9,small:"",color:"blue"},{default:t(()=>[n(" hyasyoda ")]),_:1})):s("",!0),e.station.r_hybrid==1?(o(),r(i,{key:10,small:"",color:"blue"},{default:t(()=>[n(" hybrid ")]),_:1})):s("",!0),e.station.r_invention==1?(o(),r(i,{key:11,small:"",color:"blue"},{default:t(()=>[n(" invention ")]),_:1})):s("",!0),e.station.r_manufacturing==1?(o(),r(i,{key:12,small:"",color:"blue"},{default:t(()=>[n(" manufacturing ")]),_:1})):s("",!0),e.station.r_moon_drilling==1?(o(),r(i,{key:13,small:"",color:"blue"},{default:t(()=>[n(" moon drilling ")]),_:1})):s("",!0),e.station.r_reprocessing==1?(o(),r(i,{key:14,small:"",color:"blue"},{default:t(()=>[n(" reprocessing ")]),_:1})):s("",!0),e.station.r_research==1?(o(),r(i,{key:15,small:"",color:"blue"},{default:t(()=>[n(" research ")]),_:1})):s("",!0),e.station.r_supercapital_shipyard==1?(o(),r(i,{key:16,small:"",color:"blue"},{default:t(()=>[n(" supercapital shipyard ")]),_:1})):s("",!0),e.station.r_t2_rigged==1?(o(),r(i,{key:17,small:"",color:"blue"},{default:t(()=>[n(" t2 rigged ")]),_:1})):s("",!0)])):s("",!0),m(B)()?s("",!0):(o(),h("div",de,"No Fit Info"))]),d("div",null,[c(oe,{class:"myStationItemsTable myRound bg-webBack",rows:e.station.fit,columns:L.value,"table-class":" text-webway","table-header-class":" text-weight-bolder","row-key":"id","no-data-label":"No Fit",dark:"",style:J({maxHeight:`${U.value}`}),dense:"",ref:"tableRef",rounded:"",flat:"","hide-bottom":"","hide-header":"",pagination:x.value,"onUpdate:pagination":a[3]||(a[3]=u=>x.value=u)},{"body-cell-icon":t(u=>[c(ae,{class:"q-pa-none",props:u},{default:t(()=>[c(K,{class:"q-pa-none"},{default:t(()=>[d("img",{src:m(z)(u.row),class:"q-pa-none"},null,8,ce)]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["rows","columns","style","pagination"])])])]),_:1}),c(W,{align:"right"},{default:t(()=>[X(c(g,{color:"negative",label:"Close"},null,512),[[te]])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};export{we as default};
