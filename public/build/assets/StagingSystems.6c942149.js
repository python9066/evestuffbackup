import{d as u,r as m,u as R,i as P,ay as V,o as $,b as A,c as w,e as y,j as o,f as n,w as s,l,g as W,_ as f,h as d,n as _,p as I,q as z,s as N,F,t as M,v as O,x as U,y as G,z as J,A as v,m as h,C as H,G as K,R as X}from"./app.f39d94a3.js";import{Q as Y,a as Z}from"./QTable.26b237a9.js";import{Q as g}from"./QTd.7192685c.js";import"./QSeparator.887bbe75.js";import"./QMarkupTable.d22b4be2.js";import"./QSelect.720d8cc4.js";import"./QChip.96647b36.js";import"./QItemLabel.95d8cbf2.js";import"./QLinearProgress.4bcde629.js";import"./QCheckbox.72e259d1.js";import"./use-checkbox.16f53b4b.js";const ee={class:"q-ma-md"},te={class:"row justify-center"},ae={class:"col-10"},se={class:"row justify-between full-width flex-center q-pt-xs myRoundTop bg-primary"},le=o("div",{class:"col-auto"},null,-1),oe=o("div",{class:"col-auto"},[o("span",{class:"text-h4"},"Staging")],-1),ne={class:"col-auto"},re=o("div",{class:"row"},[o("div",{class:"col"},[o("span",{class:"myFont"},"Webway")])],-1),ie={class:"row"},de={class:"col"},ce={key:1},ue={class:"row q-gutter-sm justify-end"},me={class:"col-auto"},we={class:"col-auto"},Ee={__name:"StagingSystems",setup(ye){W(e=>({"28de5b9c":L.value}));const p=u(()=>f(()=>import("./StagingEditPannel.c7ddb00f.js"),["assets/StagingEditPannel.c7ddb00f.js","assets/app.f39d94a3.js","assets/app.4fce15f2.css","assets/QSelect.720d8cc4.js","assets/QChip.96647b36.js","assets/QItemLabel.95d8cbf2.js"])),x=u(()=>f(()=>import("./StagingDscan.06eff1a1.js"),["assets/StagingDscan.06eff1a1.js","assets/app.f39d94a3.js","assets/app.4fce15f2.css"])),C=u(()=>f(()=>import("./SoloCampaginWebWay.41de2a6a.js"),["assets/SoloCampaginWebWay.41de2a6a.js","assets/app.f39d94a3.js","assets/app.4fce15f2.css"]));let k=m({sortBy:"progress",descending:!1,page:1,rowsPerPage:0}),a=R();P("can"),V();let Q=m(!1);$(async()=>{document.title="Evestuff - Staging Systems",await a.getWebwayStartSystems(),await a.getStagingSystemInfo(),await a.getSystemList(),Echo.private("stagingsystem").listen("StagingSystemUpdate",e=>{e.flag.flag==1&&a.updateStagingSystem(e.flag.message),e.flag.flag==2&&a.deleteStagingSystem(e.flag.message)})}),A(()=>{Echo.leave("stagingsystem")});let E=async e=>{await axios({method:"delete",url:"api/staging/"+e,withCredentials:!0,headers:{Accept:"application/json","Content-Type":"application/json"}})},j=w(()=>!!(a.webwayStartSystems&&a.webwayStartSystems.length>0)),q=e=>{var r=T.value.filter(t=>t.value!=e);return r},B=e=>{var r={value:e.value,text:e.text};Q.value=!1,a.updateWebwaySelectedStartSystem(r)},T=w(()=>{var e=a.webwayStartSystems,r={value:30004759,text:"1DQ1-A"};return e.push(r),e.sort(function(t,i){return t.value-i.value||t.text.localeCompare(i.text)}),e}),b=e=>{if(e.system.webway.length>0){var r=e.system.webway,t=r.filter(c=>c.start_system_id==a.webwaySelectedStartSystem.value);if(t.length>0){var i=t[0].jumps;return i}else return null}else return null},S=e=>{if(e.system.webway.length>0){var r=e.system.webway,t=r.filter(c=>c.start_system_id==a.webwaySelectedStartSystem.value);if(t.length>0){var i=t[0].webway;return i}else return null}else return null},D=m([{name:"webway",align:"left",required:!1,label:"Webway",style:"width: 5%",classes:"text-no-wrap",field:e=>e.id,format:e=>`${e}`,sortable:!1},{name:"region",required:!0,align:"left",style:"width: 7%",label:"Region",classes:"text-no-wrap",field:e=>e.system.constellation.region.region_name,format:e=>`${e}`,sortable:!1,filter:!0},{name:"constellation",required:!0,align:"left",style:"width: 7%",label:"Constellation",classes:"text-no-wrap",field:e=>e.system.constellation.constellation_name,format:e=>`${e}`,sortable:!1,filter:!0},{name:"system",required:!0,align:"left",style:"width: 7%",label:"System",classes:"text-no-wrap",field:e=>e.system.system_name,format:e=>`${e}`,sortable:!1,filter:!0},{name:"dscan",required:!0,align:"center",label:"Dscan",classes:"text-no-wrap",field:e=>e.id,format:e=>`${e}`,sortable:!1,filter:!0},{name:"actions",required:!0,align:"right",label:"",classes:"text-no-wrap",field:e=>e.id,format:e=>`${e}`,sortable:!1,filter:!0}]),L=w(()=>{let e=30;return a.size.height-e+"px"});return(e,r)=>(d(),y("div",ee,[o("div",te,[o("div",ae,[n(Y,{title:"Connections",class:"myTableStagingSystem myRound bg-webBack",rows:l(a).stagingSystems,columns:D.value,"table-class":" text-webway","table-header-class":" text-weight-bolder","row-key":"id",dark:"",dense:"","hide-pagination":"",ref:"tableRef",rounded:"",pagination:k.value},{top:s(t=>[o("div",se,[le,oe,o("div",ne,[n(l(p))])])]),"header-cell-webway":s(t=>[n(Z,{props:t},{default:s(()=>[re,o("div",ie,[o("div",de,[j.value?(d(),_(h,{key:0,color:"webChip",size:"sm",label:l(a).webwaySelectedStartSystem.text},{default:s(()=>[n(I,null,{default:s(()=>[n(z,{class:"my-card"},{default:s(()=>[n(N,{bordered:""},{default:s(()=>[(d(!0),y(F,null,M(l(q)(l(a).webwaySelectedStartSystem.value),(i,c)=>O((d(),_(U,{clickable:"",key:c,onClick:fe=>l(B)(i)},{default:s(()=>[n(G,null,{default:s(()=>[J(v(i.text),1)]),_:2},1024)]),_:2},1032,["onClick"])),[[K],[X]])),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["label"])):(d(),y("span",ce,v(l(a).webwaySelectedStartSystem.text),1))])])]),_:2},1032,["props"])]),"body-cell-webway":s(t=>[n(g,{props:t},{default:s(()=>[l(b)(t.row)&&l(S)(t.row)?(d(),_(l(C),{key:0,jumps:l(b)(t.row),web:l(S)(t.row)},null,8,["jumps","web"])):H("",!0)]),_:2},1032,["props"])]),"body-cell-dscan":s(t=>[n(g,{props:t},{default:s(()=>[n(l(x),{item:t.row},null,8,["item"])]),_:2},1032,["props"])]),"body-cell-actions":s(t=>[n(g,{props:t},{default:s(()=>[o("div",ue,[o("div",me,[n(l(p),{edit:!0,item:t.row},null,8,["item"])]),o("div",we,[n(h,{color:"negative",icon:"fa-solid fa-trash-alt",size:"sm",round:"",padding:"none",flat:"",onClick:i=>l(E)(t.row.id)},null,8,["onClick"])])])]),_:2},1032,["props"])]),_:1},8,["rows","columns","pagination"])])])]))}};export{Ee as default};
