import{aH as E,n as D,p as L,v as u,w as U,x as k,e as n,c as m,A as f,a as d,C as g,I as A,J as B,_ as c,o as p,E as N}from"./app.e311c8d7.js";const S={class:"q-ma-md"},V={class:"row"},P={class:"col"},R={class:"row"},T={class:"col"},x={class:"row"},b={__name:"NewCampaign",setup(M){let _=E(),e=D(),w=L("can");const C=u(()=>c(()=>import("./CampaignTitleBar.faac745a.js"),["assets/CampaignTitleBar.faac745a.js","assets/app.e311c8d7.js","assets/app.78479e83.css","assets/QExpansionItem.341f96c9.js","assets/QItemLabel.17844741.js","assets/QSlideTransition.8865272f.js","assets/QSeparator.58649ec0.js"])),h=u(()=>c(()=>import("./CampaignSystemCard.15fb3ddb.js"),["assets/CampaignSystemCard.15fb3ddb.js","assets/app.e311c8d7.js","assets/app.78479e83.css","assets/QSeparator.58649ec0.js","assets/QExpansionItem.341f96c9.js","assets/QItemLabel.17844741.js","assets/QSlideTransition.8865272f.js"])),O=u(()=>c(()=>import("./CampaignActiveBar.99fc2f6d.js"),["assets/CampaignActiveBar.99fc2f6d.js","assets/app.e311c8d7.js","assets/app.78479e83.css","assets/QTabPanels.b91fcaf9.js","assets/QExpansionItem.341f96c9.js","assets/QItemLabel.17844741.js","assets/QSlideTransition.8865272f.js","assets/QSeparator.58649ec0.js"]));U(async()=>{await e.getOperationInfo(_.params.id),await e.getCampaignsList(t.value),Echo.private("operations."+t.value).listen("OperationUpdate",a=>{a.flag.flag==1,a.flag.flag==2&&(e.newOperationInfo.read_only=a.flag.message),a.flag.flag==3&&(e.newOperationInfo=a.flag.message),a.flag.flag==4&&e.updateNewCampaigns(a.flag.message),a.flag.flag==5&&e.removeCharfromOpList(a.flag.userid),a.flag.flag==6&&e.updateOpChar(a.flag.message),a.flag.flag==7&&e.updateNewCampaignSystem(a.flag.message),a.flag.flag==8&&e.updateNewCampaigns(a.flag.message.campaign[0]),a.flag.flag==9&&(e.state.newCampaignSystems=a.flag.message)}),Echo.private("operationsown."+e.user_id+"-"+t.value).listen("OperationOwnUpdate",a=>{a.flag.flag==1&&(e.newOperationMessageOverlay=parseInt(a.flag.type)),a.flag.flag==2,a.flag.flag==3&&e.updateNewOwnChar(a.flag.message),a.flag.flag==4,a.flag.flag==5&&e.removeCharfromOwnList(a.flag.userid),a.flag.flag==6,a.flag.flag==7,a.flag.flag==8}),w("view_campaign_members")&&Echo.private("operationsadmin."+t.value).listen("OperationAdminUpdate",a=>{a.flag.flag==1&&(e.operationUserList=a.flag.message),a.flag.flag==2,a.flag.flag==3,a.flag.flag==4,a.flag.flag==5,a.flag.flag==6,a.flag.flag==7,a.flag.flag==8})}),k(async()=>{Echo.leave("operations."+t.value),Echo.leave("operationsown."+e.user_id+"-"+t.value),Echo.leave("operationsadmin."+t.value)});let s=n(()=>{var a=e.newCampaigns.length;if(a>0){var l=e.newCampaigns.filter(i=>i.status_id==2);return l}else return[]}),r=n(()=>{var a=e.newCampaigns.length;if(a>0){var l=e.newCampaigns.filter(i=>i.status_id==5);return l}else return[]}),t=n(()=>e.newOperationInfo.id),v=n(()=>{if(s.value.length>0&&r.value.length>0){let a=s.value.concat(r.value);return a=a.filter((l,i)=>a.indexOf(l)==i),a}else return s.value.length>0?s.value:r.value.length>0?r.value:[]}),I=n(()=>{if(v.value.length>0){var a=v.value.map(l=>l.id);return a}else return[]}),y=n(()=>{var a=e.newCampaignSystems.filter(l=>l.new_campaigns.filter(o=>I.value.includes(o.id)).length>0);return a});return(a,l)=>(p(),m("div",S,[f("div",V,[f("div",P,[d(g(C),{operationID:t.value,title:g(e).newOperationInfo.title,activeCampaigns:s.value,warmUpCampaigns:r.value},null,8,["operationID","title","activeCampaigns","warmUpCampaigns"])])]),f("div",R,[f("div",T,[d(g(O),{operationID:t.value},null,8,["operationID"])])]),f("div",x,[(p(!0),m(A,null,B(y.value,(i,o)=>(p(),m("div",{class:"col-6 q-pa-sm",key:o.id},[(p(),N(g(h),{key:`${o.id}-card`,item:i,operationID:t.value},null,8,["item","operationID"]))]))),128))])]))}};export{b as default};
