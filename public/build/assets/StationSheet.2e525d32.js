import{ac as se,ad as ne,ae as oe,r as m,af as ie,ag as re,y as ue,s as de,e as d,o as p,c as F,a as s,w as n,ah as me,ai as r,aj as ce,Q as fe,ak as u,a0 as _,ax as k,ay as Q,$ as f,t as x,al as $,Y as pe,am as ve,z as we,an as be,ao as ye,ab as xe,aq as _e,as as he,b as ge,at as Se,R as Le}from"./app.08c7f112.js";import{Q as Ce,b as q,e as A,d as U,c as Ve,a as Re}from"./QTable.cb320335.js";import{Q as D}from"./QToggle.9173b993.js";const Te={class:"q-ma-md"},Fe=r("div",{class:"row full-width flex-center q-pt-xs myRoundTop bg-primary"},[r("div",{class:"col-12 flex flex-center"},[r("span",{class:"text-h4"},"Stations")])],-1),ke={class:"row full-width q-pt-md justify-between"},Qe={class:"col-12"},$e={class:"row q-gutter-sm q-pl-md"},qe={class:"col-1"},Ae={class:"col-2"},Ue={class:"text-xs"},De={class:"col-4"},Me={class:"text-xs"},Be={class:"col-4"},je={class:"text-xs"},Ie=r("div",{class:"row"},[r("div",{class:"col"},[r("span",{class:"myFont"},"Webway")])],-1),We={class:"row"},Ee={class:"col"},Pe={key:1},Je={__name:"StationSheet",setup(He){se(e=>({"5f5f6ae6":le.value}));let i=ne();oe("can"),m(0),ie();let h=m("");const N=re(()=>me(()=>import("./SoloCampaginWebWay.d364c3f9.js"),["assets/SoloCampaginWebWay.d364c3f9.js","assets/app.08c7f112.js","assets/app.4ba9f0e4.css"]));ue(async()=>{await i.getStationRegionLists(),await i.getStationList(),Echo.private("stationsheet").listen("StationSheetUpdate",e=>{e.flag.message!=null&&i.updateStationList(e.flag.message),e.flag.flag==1&&i.getStationRegionLists(),e.flag.flag==2&&i.getStationList(),e.flag.flag==3}).listen("StationDeadStationSheet",e=>{i.deleteStationSheetNotification(e.flag.id)}).listen("StationSheetUpdateWebway",e=>{z(e.flag.id)})}),de(async()=>{Echo.leave("stationsheet")}),document.title="Evestuff - Stations";let z=e=>{axios({method:"put",url:"/api/stationsheetupdatewebway/"+e,withCredentials:!0,headers:{Accept:"application/json","Content-Type":"application/json"}})},g=()=>{},v=m([]),S=m(),M=d(()=>{var e=i.stationList.map(t=>({id:t.system.region.id,name:t.system.region.region_name}));const a=[],l=new Map;for(const t of e)l.has(t.id)||(l.set(t.id,!0),a.push({value:t.id,text:t.name}));return a.sort((t,o)=>t.text.localeCompare(o.text)),a}),L=d(()=>S.value?M.value.filter(e=>e.text.toLowerCase().indexOf(S.value)>-1):M.value),O=(e,a,l)=>{a(()=>{S.value=e.toLowerCase(),L.value.length>0&&e&&(v.value=L.value[0])})},w=m([]),C=m(),B=d(()=>{var e=i.stationList.map(t=>({id:t.system.constellation.id,name:t.system.constellation.constellation_name}));const a=[],l=new Map;for(const t of e)l.has(t.id)||(l.set(t.id,!0),a.push({value:t.id,text:t.name}));return a.sort((t,o)=>t.text.localeCompare(o.text)),a}),V=d(()=>C.value?B.value.filter(e=>e.text.toLowerCase().indexOf(C.value)>-1):B.value),J=(e,a,l)=>{a(()=>{C.value=e.toLowerCase(),V.value.length>0&&e&&(w.value=V.value[0])})},b=m([]),R=m(),j=d(()=>{var e=i.stationList.map(t=>({id:t.item.id,type:t.item.item_name}));const a=[],l=new Map;for(const t of e)l.has(t.id)||(l.set(t.id,!0),a.push({value:t.id,text:t.type}));return a.sort((t,o)=>t.text.localeCompare(o.text)),a}),T=d(()=>R.value?j.value.filter(e=>e.text.toLowerCase().indexOf(R.value)>-1):j.value),Y=(e,a,l)=>{a(()=>{R.value=e.toLowerCase(),T.value.length>0&&e&&(b.value=T.value[0])})},I=d(()=>v.value.length>0?i.stationList.filter(e=>!!v.value.map(a=>a.value).includes(e.system.region.id)):i.stationList),W=d(()=>w.value.length>0?I.value.filter(e=>!!w.value.map(a=>a.value).includes(e.system.constellation.id)):I.value),G=d(()=>b.value.length>0?W.value.filter(e=>!!b.value.map(a=>a.value).includes(e.item_id)):W.value),E=e=>{if(e.system.webway){var a=e.system.webway,l=a.filter(o=>o.start_system_id==i.webwaySelectedStartSystem.value);if(l.length>0){var t=l[0].jumps;return t}else return null}else return null},K=e=>{var a={value:e.value,text:e.text};menu=!1,i.updateWebwaySelectedStartSystem(a)},P=e=>{var o;if(e.system.webway){var a=e.system.webway,l=a.filter(c=>c.start_system_id==i.webwaySelectedStartSystem.value);if(l.length>0){var t=(o=l[0].webway)!=null?o:null;return t}else return null}else return null},X=d(()=>i.webwaySelectedStartSystem.length>0),Z=d(()=>{var e=i.webwayStartSystems,a={value:30004759,text:"1DQ1-A"};return e.push(a),e.sort(function(l,t){return l.value-t.value||l.text.localeCompare(t.text)}),e}),ee=e=>{var a=Z.value.filter(l=>l.value!=e);return a},te=m({sortBy:"progress",descending:!1,page:1,rowsPerPage:0}),ae=m([{name:"webway",align:"center",required:!1,label:"Webway",classes:"text-no-wrap",field:e=>e.system.webway[0]?e.system.webway[0].jumps:null,format:e=>`${e}`,sortable:!1},{name:"region",required:!0,align:"left",label:"Region",classes:"text-no-wrap",style:"width: 7%",field:e=>e.system.region.region_name,format:e=>`${e}`,sortable:!1,filter:!0},{name:"constellation",required:!0,align:"left",label:"Constellation",classes:"text-no-wrap",field:e=>e.system.constellation.constellation_name,format:e=>`${e}`,sortable:!1,filter:!0},{name:"system",align:"left",classes:"text-no-wrap",label:"System",field:e=>e.system.system_name,format:e=>`${e}`,sortable:!1,filter:!0},{name:"corpTicker",align:"left",required:!0,classes:"text-no-wrap",label:"Corp",field:e=>e.corp.ticker,format:e=>`${e}`,sortable:!1,filter:!0},{name:"allianceTicker",align:"left",required:!0,label:"Alliance",style:"width: 5%",classes:"text-no-wrap",field:e=>e.corp.alliance?e.corp.alliance.ticker:null,format:e=>`${e}`,sortable:!1,filter:!0},{name:"type",label:"Type",classes:"text-no-wrap",field:e=>e.item.item_name,format:e=>`${e}`,sortable:!1,filter:!0},{name:"name",label:"Name",align:"left",classes:"text-no-wrap",field:e=>e.name,format:e=>`${e}`,sortable:!1,filter:!0},{name:"status",label:"Status",classes:"text-no-wrap",align:"right",style:"width: 25%",sortable:!1,field:e=>e.status.name,format:e=>`${e}`},{name:"actions",label:"",align:"right",classes:"text-no-wrap",sortable:!1,field:e=>e.id,format:e=>`${e}`}]),le=d(()=>{let e=50;return i.size.height-e+"px"});return(e,a)=>(p(),F("div",Te,[s(Ce,{title:"Connections",class:"myTableStations myRound bg-webBack",rows:G.value,columns:ae.value,"table-class":" text-webway","table-header-class":" text-weight-bolder","row-key":"id",dark:"",dense:"",filter:h.value,ref:"tableRef",rounded:"",pagination:te.value},{top:n(l=>[Fe,r("div",ke,[r("div",Qe,[r("div",$e,[r("div",qe,[s(ce,{rounded:"",standout:"",dense:"",debounce:"300",modelValue:h.value,"onUpdate:modelValue":a[0]||(a[0]=t=>h.value=t),clearable:"",placeholder:"Search"},{append:n(()=>[s(fe,{name:"fa-solid fa-magnifying-glass"})]),_:1},8,["modelValue"])]),r("div",Ae,[s(q,{rounded:"",dense:"",clearable:"",standout:"","input-debounce":"0","label-color":"webway","option-value":"value","option-label":"text",modelValue:v.value,"onUpdate:modelValue":a[1]||(a[1]=t=>v.value=t),options:L.value,ref:"toRegionRef",label:"Region",onFilter:u(O),onFilterAbort:u(g),"map-options":"","use-input":"","use-chips":"",multiple:"","input-style":" max-width: 10px; min-width: 10px"},{option:n(({itemProps:t,opt:o,selected:c,toggleOption:y})=>[s(_,k(Q(t)),{default:n(()=>[s(f,null,{default:n(()=>[s(A,{innerHTML:o.text},null,8,["innerHTML"])]),_:2},1024),s(f,{side:""},{default:n(()=>[s(D,{"model-value":c,"onUpdate:modelValue":H=>y(o)},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024)]),_:2},1040)]),"selected-item":n(t=>[s(U,{removable:"",onRemove:o=>t.removeAtIndex(t.index),tabindex:t.tabindex,"text-color":"white",class:"q-ma-none",color:"webChip"},{default:n(()=>[r("span",Ue,x(t.opt.text),1)]),_:2},1032,["onRemove","tabindex"])]),_:1},8,["modelValue","options","onFilter","onFilterAbort"])]),r("div",De,[s(q,{rounded:"",clearable:"",dense:"",standout:"","input-debounce":"0","label-color":"webway","option-value":"value","option-label":"text",modelValue:w.value,"onUpdate:modelValue":a[2]||(a[2]=t=>w.value=t),options:V.value,ref:"toConstellationRef",label:"Constellations",onFilter:u(J),onFilterAbort:u(g),"map-options":"","use-input":"","use-chips":"",multiple:"","input-style":" max-width: 10px; min-width: 10px"},{option:n(({itemProps:t,opt:o,selected:c,toggleOption:y})=>[s(_,k(Q(t)),{default:n(()=>[s(f,null,{default:n(()=>[s(A,{innerHTML:o.text},null,8,["innerHTML"])]),_:2},1024),s(f,{side:""},{default:n(()=>[s(D,{"model-value":c,"onUpdate:modelValue":H=>y(o)},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024)]),_:2},1040)]),"selected-item":n(t=>[s(U,{removable:"",onRemove:o=>t.removeAtIndex(t.index),tabindex:t.tabindex,"text-color":"white",class:"q-ma-none",color:"webChip"},{default:n(()=>[r("span",Me,x(t.opt.text),1)]),_:2},1032,["onRemove","tabindex"])]),_:1},8,["modelValue","options","onFilter","onFilterAbort"])]),r("div",Be,[s(q,{rounded:"",clearable:"",dense:"",standout:"","input-debounce":"0","label-color":"webway","option-value":"value","option-label":"text",modelValue:b.value,"onUpdate:modelValue":a[3]||(a[3]=t=>b.value=t),options:T.value,ref:"typeRef",label:"Type",onFilter:u(Y),onFilterAbort:u(g),"map-options":"","use-input":"","use-chips":"",multiple:"","input-style":" max-width: 10px; min-width: 10px"},{option:n(({itemProps:t,opt:o,selected:c,toggleOption:y})=>[s(_,k(Q(t)),{default:n(()=>[s(f,null,{default:n(()=>[s(A,{innerHTML:o.text},null,8,["innerHTML"])]),_:2},1024),s(f,{side:""},{default:n(()=>[s(D,{"model-value":c,"onUpdate:modelValue":H=>y(o)},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024)]),_:2},1040)]),"selected-item":n(t=>[s(U,{removable:"",onRemove:o=>t.removeAtIndex(t.index),tabindex:t.tabindex,"text-color":"white",class:"q-ma-none",color:"webChip"},{default:n(()=>[r("span",je,x(t.opt.text),1)]),_:2},1032,["onRemove","tabindex"])]),_:1},8,["modelValue","options","onFilter","onFilterAbort"])])])])])]),"header-cell-webway":n(l=>[s(Ve,{props:l},{default:n(()=>[Ie,r("div",We,[r("div",Ee,[X.value?(p(),$(xe,{key:0,size:"sm",label:u(i).webwaySelectedStartSystem.text},{default:n(()=>[s(pe,null,{default:n(()=>[s(ve,{class:"my-card"},{default:n(()=>[s(we,{bordered:""},{default:n(()=>[(p(!0),F(be,null,ye(u(ee)(u(i).webwaySelectedStartSystem.value),(t,o)=>he((p(),$(_,{clickable:"",key:o,onClick:c=>u(K)(t)},{default:n(()=>[s(f,null,{default:n(()=>[ge(x(t.text),1)]),_:2},1024)]),_:2},1032,["onClick"])),[[Se],[Le]])),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["label"])):(p(),F("span",Pe,x(u(i).webwaySelectedStartSystem.text),1))])])]),_:2},1032,["props"])]),"body-cell-webway":n(l=>[s(Re,{props:l},{default:n(()=>[u(E)(l.row)&&u(P)(l.row)?(p(),$(u(N),{key:0,jumps:u(E)(l.row),web:u(P)(l.row)},null,8,["jumps","web"])):_e("",!0)]),_:2},1032,["props"])]),_:1},8,["rows","columns","filter","pagination"])]))}};export{Je as default};
