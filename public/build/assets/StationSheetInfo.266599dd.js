import{ad as Y,aC as P,ae as E,r as y,e as m,o,c as h,ai as d,a as c,ak as _,ab as g,w as t,am as H,a_ as Q,t as $,b as n,ap as Z,aq as s,al as r,b1 as G,ar as J,b0 as K,at as W,Z as X,an as ee,au as te}from"./app.b0420997.js";import{d as i,Q as ae,a as oe}from"./QTable.cffd3fb0.js";const se={class:"no-margin"},le={class:"column"},ne={class:"row justify-between"},re={class:"co-autol"},ie={key:0,class:"col-auto"},ue={key:0},de={key:1},ce=["src"],fe={__name:"StationSheetInfo",props:{station:Object},setup(R){const e=R;let q=Y();const S=P();let b=E("can"),x=y({sortBy:"item",descending:!1,page:1,rowsPerPage:0}),C=y(!1),N=()=>{v.value=!0,V()},M=m(()=>e.station.r_cored==1?"Yes":"No"),T=m(()=>M.value=="Yes"?"text-green":"text-red"),V=()=>{e.station.r_fitted=="Fitted"&&(C.value=!0)},B=()=>C.value==!0,F=m(()=>!!(b("request_recon_task")&&e.station.r_research!=null)),D=()=>!!e.station.system.task_flag,I=()=>{var l="https://recon.gnf.lt/structures/"+e.station.r_hash+"/view",a=window.open(l,"_blank");a.focus()},z=l=>"https://images.evetech.net/types/"+l.id+"/icon",O=()=>{var l={system_name:e.station.system.system_name,system_id:e.station.system_id,station_id:e.station.id,structure_name:e.station.name,username:q.user_name,show_on_main:e.station.show_on_main,show_on_chill:e.show_on_chill};axios({method:"post",url:"api/taskrequest",withCredentials:!0,data:l,headers:{Accept:"application/json","Content-Type":"application/json"}}),S.notify({type:"info",message:"Request Sent"})},j=m(()=>{const l=new Date(e.station.r_updated_at),a=new Date,u=(a.getFullYear()-l.getFullYear())*12,f=a.getMonth()-l.getMonth();return u+f>1}),A=m(()=>{if(e.station.r_updated_at!=null){const l=new Date(e.station.r_updated_at),a=Math.floor((new Date-l)/1e3),u=Math.floor(a/31536e3);if(u>=1)return`${u} year${u===1?"":"s"} ago`;const f=Math.floor(a/2592e3);if(f>=1)return`${f} month${f===1?"":"s"} ago`;const p=Math.floor(a/86400);if(p>=1)return`${p} day${p===1?"":"s"} ago`;const k=Math.floor(a/3600);if(k>=1)return`${k} hour${k===1?"":"s"} ago`;const w=Math.floor(a/60);return w>=1?`${w} minute${w===1?"":"s"} ago`:`${a} second${a===1?"":"s"} ago`}else return"Never"}),L=y([{name:"icon",align:"left",required:!1,label:"",classes:"text-no-wrap q-pa-none",field:l=>l.id,format:l=>`${l}`,sortable:!1},{name:"item",required:!0,align:"left",label:"Items",classes:"text-no-wrap ",field:l=>l.item_name,format:l=>`${l}`,sortable:!1}]),v=y(!1),U=m(()=>{let l=325;return q.size.height-l+"px"});return(l,a)=>(o(),h(ee,null,[d("div",null,[c(g,{color:"primary",icon:"fa-solid fa-circle-info",padding:"none",round:"",flat:"",onClick:a[0]||(a[0]=u=>_(N)())})]),c(X,{modelValue:v.value,"onUpdate:modelValue":a[4]||(a[4]=u=>v.value=u)},{default:t(()=>[c(H,{class:"myRoundTop",style:{width:"500px"}},{default:t(()=>[c(Q,{class:"bg-primary text-h5 text-center"},{default:t(()=>[d("span",se,$(e.station.name),1)]),_:1}),c(Q,null,{default:t(()=>[d("div",le,[d("div",null,[d("div",ne,[d("div",re,[n(" Cored: "),d("strong",{class:Z(T.value)},$(M.value),3)]),F.value?(o(),h("div",ie,[c(g,{outline:"",rounded:"",class:"myOutLineButton",size:"sm",color:"secondary",label:"View On Recon Tool",onClick:a[1]||(a[1]=u=>_(I)())})])):s("",!0)])]),d("div",null,[n(" Last Updated: "+$(A.value)+" ",1),_(b)("request_recon_task")&&!_(D)()&&j.value?(o(),r(g,{key:0,outline:"",rounded:"",class:"myOutLineButton",size:"sm",color:"secondary",label:"Request Update",onClick:a[2]||(a[2]=u=>_(O)())})):s("",!0),_(b)("request_recon_task")&&_(D)()?(o(),r(i,{key:1,outline:"",rounded:"",class:"myOutLineButton",size:"sm",color:"secondary",label:"Request Made"})):s("",!0)]),d("div",null,[_(B)()?(o(),h("div",ue,[e.station.r_anti_cap==1?(o(),r(i,{key:0,small:"",color:"red",class:""},{default:t(()=>[n(" anti cap ")]),_:1})):s("",!0),e.station.r_anti_subcap==1?(o(),r(i,{key:1,small:"",color:"red"},{default:t(()=>[n(" anti subcap ")]),_:1})):s("",!0),e.station.r_dooms_day==1?(o(),r(i,{key:2,small:"",color:"red"},{default:t(()=>[n(" dooms day ")]),_:1})):s("",!0),e.station.r_point_defense==1?(o(),r(i,{key:3,small:"",color:"red"},{default:t(()=>[n(" point defense ")]),_:1})):s("",!0),e.station.r_biochemical==1?(o(),r(i,{key:4,small:"",color:"blue"},{default:t(()=>[n(" biochemical ")]),_:1})):s("",!0),e.station.r_capital_shipyard==1?(o(),r(i,{key:5,small:"",color:"blue"},{default:t(()=>[n(" capital shipyard ")]),_:1})):s("",!0),e.station.r_cloning==1?(o(),r(i,{key:6,small:"",color:"blue"},{default:t(()=>[n(" cloning ")]),_:1})):s("",!0),e.station.r_composite==1?(o(),r(i,{key:7,small:"",color:"blue"},{default:t(()=>[n(" composite ")]),_:1})):s("",!0),e.station.r_guide_bombs==1?(o(),r(i,{key:8,small:"",color:"red"},{default:t(()=>[n(" guide bombs ")]),_:1})):s("",!0),e.station.r_hyasyoda==1?(o(),r(i,{key:9,small:"",color:"blue"},{default:t(()=>[n(" hyasyoda ")]),_:1})):s("",!0),e.station.r_hybrid==1?(o(),r(i,{key:10,small:"",color:"blue"},{default:t(()=>[n(" hybrid ")]),_:1})):s("",!0),e.station.r_invention==1?(o(),r(i,{key:11,small:"",color:"blue"},{default:t(()=>[n(" invention ")]),_:1})):s("",!0),e.station.r_manufacturing==1?(o(),r(i,{key:12,small:"",color:"blue"},{default:t(()=>[n(" manufacturing ")]),_:1})):s("",!0),e.station.r_moon_drilling==1?(o(),r(i,{key:13,small:"",color:"blue"},{default:t(()=>[n(" moon drilling ")]),_:1})):s("",!0),e.station.r_reprocessing==1?(o(),r(i,{key:14,small:"",color:"blue"},{default:t(()=>[n(" reprocessing ")]),_:1})):s("",!0),e.station.r_research==1?(o(),r(i,{key:15,small:"",color:"blue"},{default:t(()=>[n(" research ")]),_:1})):s("",!0),e.station.r_supercapital_shipyard==1?(o(),r(i,{key:16,small:"",color:"blue"},{default:t(()=>[n(" supercapital shipyard ")]),_:1})):s("",!0),e.station.r_t2_rigged==1?(o(),r(i,{key:17,small:"",color:"blue"},{default:t(()=>[n(" t2 rigged ")]),_:1})):s("",!0)])):s("",!0),_(B)()?s("",!0):(o(),h("div",de,"No Fit Info"))]),d("div",null,[c(ae,{class:"myStationItemsTable myRound bg-webBack",rows:e.station.fit,columns:L.value,"table-class":" text-webway","table-header-class":" text-weight-bolder","row-key":"id","no-data-label":"No Fit",dark:"",style:G({maxHeight:`${U.value}`}),dense:"",ref:"tableRef",rounded:"",flat:"","hide-bottom":"","hide-header":"",pagination:x.value,"onUpdate:pagination":a[3]||(a[3]=u=>x.value=u)},{"body-cell-icon":t(u=>[c(oe,{class:"q-pa-none",props:u},{default:t(()=>[c(J,{class:"q-pa-none"},{default:t(()=>[d("img",{src:_(z)(u.row),class:"q-pa-none"},null,8,ce)]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["rows","columns","style","pagination"])])])]),_:1}),c(K,{align:"right"},{default:t(()=>[W(c(g,{color:"negative",label:"Close"},null,512),[[te]])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};export{fe as default};
