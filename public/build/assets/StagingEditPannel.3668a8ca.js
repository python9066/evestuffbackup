import{u as j,i as T,r as p,c,h as b,e as U,n as C,m,C as g,f as a,w as u,q as h,aD as w,z as D,Q as N,l as r,aE as $,v as x,ab as q,G as V}from"./app.94516e8c.js";import{Q as E}from"./QSelect.c035ddb5.js";import"./QChip.22faebdf.js";import"./QItemLabel.e6717fed.js";const O={__name:"StagingEditPannel",props:{edit:{type:Boolean,default:!1},item:{type:[Object,Array],required:!1}},setup(v){const n=v;let f=j();T("can");let s=p(!1),i=p(""),S=async()=>{let t={name:i.value,system_id:o.value.value};n.edit?await axios({method:"put",withCredentials:!0,data:t,url:"/api/staging/"+n.item.id,headers:{Accept:"application/json","Content-Type":"application/json"}}).then(e=>{}):await axios({method:"post",withCredentials:!0,data:t,url:"/api/staging",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(e=>{})},F=()=>{},o=p([]),d=p(),y=c(()=>d.value?f.systemlist.filter(t=>t.text.toLowerCase().indexOf(d.value)>-1):f.systemlist),k=(t,e,l)=>{e(()=>{d.value=t.toLowerCase(),y.value.length>0&&t&&(o.value=y.value[0])})},Q=()=>{n.edit&&(i.value=n.item.name,o.value=f.systemlist.find(t=>t.value==n.item.system_id))},A=c(()=>i.value==""||o.value.length==0),B=()=>{i.value="",o.value=[],d.value=""};return(t,e)=>(b(),U("div",null,[v.edit?g("",!0):(b(),C(m,{key:0,flat:"",color:"warning",icon:"fa-solid fa-plus",label:"Add Staging System",onClick:e[0]||(e[0]=l=>s.value=!s.value)})),v.edit?(b(),C(m,{key:1,flat:"",round:"",padding:"none",size:"sm",color:"secondary",icon:"fa-solid fa-edit",onClick:e[1]||(e[1]=l=>s.value=!s.value)})):g("",!0),a(q,{modelValue:s.value,"onUpdate:modelValue":e[4]||(e[4]=l=>s.value=l),persistent:"",onBeforeHide:e[5]||(e[5]=l=>r(B)()),onBeforeShow:e[6]||(e[6]=l=>r(Q)())},{default:u(()=>[a(h,{class:"myRoundTop"},{default:u(()=>[a(w,{class:"myCardHeader bg-primary text-h3 text-no-wrap"},{default:u(()=>[D(" Add new Staging ")]),_:1}),a(w,null,{default:u(()=>[a(N,{modelValue:i.value,"onUpdate:modelValue":e[2]||(e[2]=l=>i.value=l),label:"Name"},null,8,["modelValue"]),a(E,{rounded:"",class:"q-pt-sm",dense:"",standout:"","input-debounce":"0","label-color":"webway","option-value":"value","option-label":"text",modelValue:o.value,"onUpdate:modelValue":e[3]||(e[3]=l=>o.value=l),options:y.value,onFilter:r(k),onFilterAbort:r(F),label:"System","use-input":""},null,8,["modelValue","options","onFilter","onFilterAbort"])]),_:1}),a($,{align:"between"},{default:u(()=>[x(a(m,{rounded:"",color:"positive",onClick:r(S),label:n.edit?"Update":"Submit",disable:A.value},null,8,["onClick","label","disable"]),[[V]]),x(a(m,{rounded:"",color:"negative",label:"Close"},null,512),[[V]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}};export{O as default};
