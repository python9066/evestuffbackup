import{p as S,n as V,e as l,o as s,c as d,E as o,y as n,a as i,H as C,I as g,J as T,K as w,L as b,C as y,M as W,N as x,O as c,F as D,D as p,R as z,U as I}from"./app.e311c8d7.js";const E={class:"row flex-center"},F={key:2},U={__name:"OnTheWay",props:{item:Object,operationID:Number},setup(H){const r=H;let B=S("can");const u=V();let j=async e=>{var a={user_status_id:2,system_id:r.item.id};await axios({method:"put",url:"/api/onthewayreadytogo/"+r.operationID+"/"+e,data:a,withCredentials:!0,headers:{Accept:"application/json","Content-Type":"application/json"}})},A=e=>!!(B("campaigns_admin_access")||u.user_id==e.user_id),L=e=>{var a={user_status_id:1,system_id:null};axios({method:"put",url:"/api/onthewayreadytogo/"+r.operationID+"/"+e,data:a,withCredentials:!0,headers:{Accept:"application/json","Content-Type":"application/json"}})},m=l(()=>M.value>0?N.value>0?1:2:0),v=l(()=>{var e=u.getOwnHackingCharOnOpAllHackers(r.operationID);return e||[]}),M=l(()=>v.value?v.value.length:0),f=l(()=>{var e=u.getOwnHackingCharOnOpAllHackers(r.operationID);return e&&(e=e.filter(a=>a.user_status_id!=4),e=e.filter(a=>a.system_id==r.item.id?a.user_status_id!=2:!0)),e||[]}),N=l(()=>f.value?f.value.length:0),h=l(()=>u.getOpUsersOnTheWayAll.filter(e=>e.system_id==r.item.id)),O=l(()=>h.value?h.value.length:0),Q=l(()=>O.value==0),k=l(()=>{var e=u.getOwnHackingCharOnOp(r.operationID);if(e)var a=e.filter(t=>t.system_id==r.item.id&&t.user_status_id==2).length;else var a=0;return a>0?"green":"red"});return(e,a)=>(s(),d("div",E,[m.value==1?(s(),o(p,{key:0,color:k.value,class:"myOutLineButtonMid","no-caps":"",label:"On The Way",rounded:""},{default:n(()=>[i(D,null,{default:n(()=>[i(C,{style:{"min-width":"100px"}},{default:n(()=>[(s(!0),d(g,null,T(f.value,(t,_)=>w((s(),o(b,{clickable:"",key:_,onClick:R=>y(j)(t.id)},{default:n(()=>[i(W,null,{default:n(()=>[x(c(t.name),1)]),_:2},1024)]),_:2},1032,["onClick"])),[[I]])),128))]),_:1})]),_:1})]),_:1},8,["color"])):m.value==2?(s(),o(p,{key:1,color:k.value,class:"myOutLineButtonMid","no-caps":"",label:"On The Way",rounded:""},null,8,["color"])):(s(),d("span",F," On The Way - ")),i(p,{color:"green-4",label:O.value,disabled:Q.value,size:"sm",round:""},{default:n(()=>[i(D,null,{default:n(()=>[i(C,{style:{"min-width":"100px"}},{default:n(()=>[(s(!0),d(g,null,T(h.value,(t,_)=>w((s(),o(b,{clickable:"",key:_},{default:n(()=>[i(W,null,{default:n(()=>[x(c(t.name)+" - "+c(t.ship)+" - T"+c(t.entosis)+" ",1),y(A)(t)?(s(),o(p,{key:0,flat:"",padding:"none",round:"",color:"warning",icon:"fa-solid fa-trash-can",size:"xs",onClick:R=>y(L)(t.id)},null,8,["onClick"])):z("",!0)]),_:2},1024)]),_:2},1024)),[[I]])),128))]),_:1})]),_:1})]),_:1},8,["label","disabled"])]))}};export{U as default};
