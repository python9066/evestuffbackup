import{d as u,r as S,u as L,o as R,b as P,c as m,e as w,j as o,f as n,w as s,l,g as V,_ as y,h as d,n as f,p as $,q as A,s as W,F as I,t as z,v as N,x as F,y as M,z as O,A as v,m as h,C as U,G,R as J}from"./app.97da09f3.js";import{Q as H,a as K}from"./QTable.58b2bbb1.js";import{Q as _}from"./QTd.36be9f29.js";import"./QSeparator.bbda4690.js";import"./QMarkupTable.f94daca3.js";import"./QSelect.550c60f5.js";import"./QItemLabel.5a882a4e.js";import"./QLinearProgress.161825f0.js";import"./QCheckbox.9de5a285.js";import"./use-checkbox.0335af96.js";const X={class:"q-ma-md"},Y={class:"row justify-center"},Z={class:"col-10"},ee={class:"row justify-between full-width flex-center q-pt-xs myRoundTop bg-primary"},te=o("div",{class:"col-auto"},null,-1),ae=o("div",{class:"col-auto"},[o("span",{class:"text-h4"},"Staging")],-1),se={class:"col-auto"},le=o("div",{class:"row"},[o("div",{class:"col"},[o("span",{class:"myFont"},"Webway")])],-1),oe={class:"row"},ne={class:"col"},re={key:1},ie={class:"row q-gutter-sm justify-end"},de={class:"col-auto"},ce={class:"col-auto"},xe={__name:"StagingSystems",setup(ue){V(e=>({"6a9cdadc":D.value}));const g=u(()=>y(()=>import("./StagingEditPannel.b7fa340a.js"),["assets/StagingEditPannel.b7fa340a.js","assets/app.97da09f3.js","assets/app.4fce15f2.css","assets/QSelect.550c60f5.js","assets/QItemLabel.5a882a4e.js"])),x=u(()=>y(()=>import("./StagingDscan.1e1c823d.js"),["assets/StagingDscan.1e1c823d.js","assets/app.97da09f3.js","assets/app.4fce15f2.css"])),C=u(()=>y(()=>import("./SoloCampaginWebWay.056f1cc5.js"),["assets/SoloCampaginWebWay.056f1cc5.js","assets/app.97da09f3.js","assets/app.4fce15f2.css"]));let k=S({sortBy:"progress",descending:!1,page:1,rowsPerPage:0}),a=L();R(async()=>{document.title="Evestuff - Staging Systems",await a.getWebwayStartSystems(),await a.getStagingSystemInfo(),await a.getSystemList(),Echo.private("stagingsystem").listen("StagingSystemUpdate",e=>{e.flag.flag==1&&a.updateStagingSystem(e.flag.message),e.flag.flag==2&&a.deleteStagingSystem(e.flag.message)})}),P(()=>{Echo.leave("stagingsystem")});let Q=async e=>{await axios({method:"delete",url:"api/staging/"+e,withCredentials:!0,headers:{Accept:"application/json","Content-Type":"application/json"}})},E=m(()=>!!(a.webwayStartSystems&&a.webwayStartSystems.length>0)),q=e=>{var r=T.value.filter(t=>t.value!=e);return r},B=e=>{var r={value:e.value,text:e.text};menu=!1,a.updateWebwaySelectedStartSystem(r)},T=m(()=>{var e=a.webwayStartSystems,r={value:30004759,text:"1DQ1-A"};return e.push(r),e.sort(function(t,i){return t.value-i.value||t.text.localeCompare(i.text)}),e}),p=e=>{if(e.system.webway.length>0){var r=e.system.webway,t=r.filter(c=>c.start_system_id==a.webwaySelectedStartSystem.value);if(t.length>0){var i=t[0].jumps;return i}else return null}else return null},b=e=>{if(e.system.webway.length>0){var r=e.system.webway,t=r.filter(c=>c.start_system_id==a.webwaySelectedStartSystem.value);if(t.length>0){var i=t[0].webway;return i}else return null}else return null},j=S([{name:"webway",align:"left",required:!1,label:"Webway",style:"width: 5%",classes:"text-no-wrap",field:e=>e.id,format:e=>`${e}`,sortable:!1},{name:"region",required:!0,align:"left",style:"width: 7%",label:"Region",classes:"text-no-wrap",field:e=>e.system.constellation.region.region_name,format:e=>`${e}`,sortable:!1,filter:!0},{name:"constellation",required:!0,align:"left",style:"width: 7%",label:"Constellation",classes:"text-no-wrap",field:e=>e.system.constellation.constellation_name,format:e=>`${e}`,sortable:!1,filter:!0},{name:"system",required:!0,align:"left",style:"width: 7%",label:"System",classes:"text-no-wrap",field:e=>e.system.system_name,format:e=>`${e}`,sortable:!1,filter:!0},{name:"dscan",required:!0,align:"center",label:"Dscan",classes:"text-no-wrap",field:e=>e.id,format:e=>`${e}`,sortable:!1,filter:!0},{name:"actions",required:!0,align:"right",label:"",classes:"text-no-wrap",field:e=>e.id,format:e=>`${e}`,sortable:!1,filter:!0}]),D=m(()=>{let e=30;return a.size.height-e+"px"});return(e,r)=>(d(),w("div",X,[o("div",Y,[o("div",Z,[n(H,{title:"Connections",class:"myTableStagingSystem myRound bg-webBack",rows:l(a).stagingSystems,columns:j.value,"table-class":" text-webway","table-header-class":" text-weight-bolder","row-key":"id",dark:"",dense:"","hide-pagination":"",ref:"tableRef",rounded:"",pagination:k.value},{top:s(t=>[o("div",ee,[te,ae,o("div",se,[n(l(g))])])]),"header-cell-webway":s(t=>[n(K,{props:t},{default:s(()=>[le,o("div",oe,[o("div",ne,[E.value?(d(),f(h,{key:0,color:"webChip",size:"sm",label:l(a).webwaySelectedStartSystem.text},{default:s(()=>[n($,null,{default:s(()=>[n(A,{class:"my-card"},{default:s(()=>[n(W,{bordered:""},{default:s(()=>[(d(!0),w(I,null,z(l(q)(l(a).webwaySelectedStartSystem.value),(i,c)=>N((d(),f(F,{clickable:"",key:c,onClick:me=>l(B)(i)},{default:s(()=>[n(M,null,{default:s(()=>[O(v(i.text),1)]),_:2},1024)]),_:2},1032,["onClick"])),[[G],[J]])),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["label"])):(d(),w("span",re,v(l(a).webwaySelectedStartSystem.text),1))])])]),_:2},1032,["props"])]),"body-cell-webway":s(t=>[n(_,{props:t},{default:s(()=>[l(p)(t.row)&&l(b)(t.row)?(d(),f(l(C),{key:0,jumps:l(p)(t.row),web:l(b)(t.row)},null,8,["jumps","web"])):U("",!0)]),_:2},1032,["props"])]),"body-cell-dscan":s(t=>[n(_,{props:t},{default:s(()=>[n(l(x),{item:t.row},null,8,["item"])]),_:2},1032,["props"])]),"body-cell-actions":s(t=>[n(_,{props:t},{default:s(()=>[o("div",ie,[o("div",de,[n(l(g),{edit:!0,item:t.row},null,8,["item"])]),o("div",ce,[n(h,{color:"negative",icon:"fa-solid fa-trash-alt",size:"sm",round:"",padding:"none",flat:"",onClick:i=>l(Q)(t.row.id)},null,8,["onClick"])])])]),_:2},1032,["props"])]),_:1},8,["rows","columns","pagination"])])])]))}};export{xe as default};
