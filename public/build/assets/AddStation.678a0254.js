import{c as m,J as ye,r,$ as be,b as Se,W as T,aG as _e,ak as we,b5 as he,u as xe,i as Ce,d as ke,_ as Te,h as F,e as Ve,n as R,m as V,C as j,f as i,w as s,q as J,aF as C,Q as O,aI as le,l as y,v as z,j as q,A as qe,z as Ne,ah as Fe,G as E}from"./app.d7f5085b.js";import{Q as Qe,a as ae}from"./QTabPanels.46436411.js";import{Q as K}from"./QSelect.c10769ec.js";import{Q as ie}from"./QSeparator.38220e22.js";import{Q as Le}from"./QOptionGroup.246d4d02.js";import"./QItemLabel.3cb0b024.js";import"./QRadio.47ba50de.js";import"./use-checkbox.a2fc49bf.js";import"./QCheckbox.187a321a.js";import"./QToggle.cdc084a8.js";const Re={ratio:[String,Number]};function je(l,N){return m(()=>{const a=Number(l.ratio||(N!==void 0?N.value:void 0));return isNaN(a)!==!0&&a>0?{paddingBottom:`${100/a}%`}:null})}const Ae=16/9,De=ye({name:"QImg",props:{...Re,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:Ae},placeholderSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(l,{slots:N,emit:a}){const p=r(l.initialRatio),D=je(l,p);let v=null,_=!1;const c=[r(null),r(x())],o=r(0),f=r(!1),d=r(!1),w=m(()=>`q-img q-img--${l.noNativeMenu===!0?"no-":""}menu`),h=m(()=>({width:l.width,height:l.height})),b=m(()=>`q-img__image ${l.imgClass!==void 0?l.imgClass+" ":""}q-img__image--with${l.noTransition===!0?"out":""}-transition`),S=m(()=>({...l.imgStyle,objectFit:l.fit,objectPosition:l.position}));be(()=>g(),$);function g(){return l.src||l.srcset||l.sizes?{src:l.src,srcset:l.srcset,sizes:l.sizes}:null}function x(){return l.placeholderSrc!==void 0?{src:l.placeholderSrc}:null}function $(n){v!==null&&(clearTimeout(v),v=null),d.value=!1,n===null?(f.value=!1,c[o.value^1].value=x()):f.value=!0,c[o.value].value=n}function P({target:n}){_!==!0&&(v!==null&&(clearTimeout(v),v=null),p.value=n.naturalHeight===0?.5:n.naturalWidth/n.naturalHeight,B(n,1))}function B(n,k){_===!0||k===1e3||(n.complete===!0?H(n):v=setTimeout(()=>{v=null,B(n,k+1)},50))}function H(n){_!==!0&&(o.value=o.value^1,c[o.value].value=null,f.value=!1,d.value=!1,a("load",n.currentSrc||n.src))}function A(n){v!==null&&(clearTimeout(v),v=null),f.value=!1,d.value=!0,c[o.value].value=null,c[o.value^1].value=x(),a("error",n)}function Q(n){const k=c[n].value,L={key:"img_"+n,class:b.value,style:S.value,crossorigin:l.crossorigin,decoding:l.decoding,referrerpolicy:l.referrerpolicy,height:l.height,width:l.width,loading:l.loading,fetchpriority:l.fetchpriority,"aria-hidden":"true",draggable:l.draggable,...k};return o.value===n?(L.class+=" q-img__image--waiting",Object.assign(L,{onLoad:P,onError:A})):L.class+=" q-img__image--loaded",T("div",{class:"q-img__container absolute-full",key:"img"+n},T("img",L))}function Y(){return f.value!==!0?T("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},we(N[d.value===!0?"error":"default"])):T("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},N.loading!==void 0?N.loading():l.noSpinner===!0?void 0:[T(he,{color:l.spinnerColor,size:l.spinnerSize})])}return $(g()),Se(()=>{_=!0,v!==null&&(clearTimeout(v),v=null)}),()=>{const n=[];return D.value!==null&&n.push(T("div",{key:"filler",style:D.value})),d.value!==!0&&(c[0].value!==null&&n.push(Q(0)),c[1].value!==null&&n.push(Q(1))),n.push(T(_e,{name:"q-transition--fade"},Y)),T("div",{class:w.value,style:h.value,role:"img","aria-label":l.alt},n)}}}),$e="/build/assets/info.a6adef34.png",Be={class:"q-pa-none"},Ie=q("img",{src:"https://i.imgur.com/1ASFxRr.gif"},null,-1),Ue=q("div",{class:"text-h6 text-center"},"Enter Structure Name",-1),Me={class:"no-margin"},Oe={class:"row"},ze={class:"col-6"},Ee={class:"col-6 flex justify-center"},Pe=q("span",{class:"text-subtitle1 text-bold"}," Timer Type",-1),He=q("span",{class:"text-subtitle1 text-bold"}," Image Link",-1),at={__name:"AddStation",props:{from:{type:Number,default:1},station:{type:Object,required:!1}},emits:["missingCorpDone"],setup(l,{emit:N}){const a=l;let p=xe();Ce("can");const D=ke(()=>Te(()=>import("./AddMissingCorp.6b56e668.js"),["assets/AddMissingCorp.6b56e668.js","assets/app.d7f5085b.js","assets/app.7b67968f.css"]));let v=r($e),_=r(!1),c=r("addName"),o=r(null),f=r(),d=r(),w=r({}),h=r(),b=r(""),S=r(),g=r(),x=r(),$=r([{label:"Anchoring",value:14},{label:"Armor",value:5},{label:"Hull",value:13}]),P=async()=>{a.from==2&&(c.value="details",g.value=3,d.value={text:a.station.corp.ticker,value:a.station.corp_id},f.value={text:a.station.system.system_name,value:a.station.system_id},S.value={text:a.station.item.item_name,value:a.station.item_id},o.value=a.station.name,x.value=a.station.id),a.from==3&&(c.value="details",g.value=4,d.value={text:a.station.corp.ticker,value:a.station.corp_id},f.value={text:a.station.system.system_name,value:a.station.system_id},S.value={text:a.station.item.item_name,value:a.station.item_id},o.value=a.station.name,x.value=a.station.id,b.value=B(),w.value=a.station.status.id,h.value=a.station.timer_image_link),await p.getSystemList(),await p.getTickList(),await p.getStructureList()},B=()=>a.station.out_time.replace(/-/g,"."),H=()=>{c.value="addName",o.value=null,f.value=null,d.value=null,w.value={},h.value=null,b.value="",S.value=null,g.value=null,x.value=null},A=r(),Q=m(()=>A.value?p.structurelist.filter(u=>u.text.toLowerCase().indexOf(A.value)>-1):p.structurelist),Y=(u,e,t)=>{e(()=>{A.value=u.toLowerCase(),Q.value.length>0&&u&&(S.value=Q.value[0])})},n=r(),k=m(()=>n.value?p.systemlist.filter(u=>u.text.toLowerCase().indexOf(n.value)>-1):p.systemlist),L=(u,e,t)=>{e(()=>{n.value=u.toLowerCase(),k.value.length>0&&u&&(f.value=k.value[0])})},I=r(),U=m(()=>I.value?p.ticklist.filter(u=>u.text.toLowerCase().indexOf(I.value)>-1):p.ticklist),ne=(u,e,t)=>{e(()=>{I.value=u.toLowerCase(),U.value.length>0&&u&&(d.value=U.value[0])})},ue=async()=>{await p.getTickList(),I.value=[],d.value={text:p.missingCorpTick,value:p.missingCorpID}},oe=m(()=>U.value.length==0),re=m(()=>g.value==2),se=async()=>{var u={stationName:o.value};await axios({method:"put",url:"api/stationname",withCredentials:!0,data:u,headers:{Accept:"application/json","Content-Type":"application/json"}}).then(e=>{let t=e.data;t.state==2&&(g.value=2,c.value="details"),t.state==3&&(g.value=3,d.value={text:t.corp_ticker,value:t.corp_id},f.value={text:t.system_name,value:t.system_id},S.value={text:t.structure_name,value:t.structure_id},o.value=t.station_name,x.value=t.station_id,c.value="details")})},G=()=>g.value==3,de=()=>g.value!=4,me=m(()=>!!(X.value&&(!M.value||!W.value))),X=m(()=>b.value.length==19),M=m(()=>/^\d{4}\.\d{2}\.\d{2} \d{2}:\d{2}:\d{2}$/.test(b.value)),W=m(()=>{if(M.value){const u=Date.now(),e=u+5*24*60*60*1e3,te=new Date(b.value).getTime();return te>=u&&te<=e}return!1}),ve=m(()=>{if(!M.value)return"Format is incorrect";if(!W.value)return"Make sure the date is correct"}),Z=m(()=>!!(X.value&&M.value&&W.value&&f.value&&d.value&&w.value>0&&h.value&&S.value)),ce=m(()=>!o.value),ee=()=>{g.value==2&&fe(),g.value==3&&pe(),g.value==4&&ge()},fe=async()=>{const u=b.value.replace(/\./g,"-");var e={name:o.value,system_id:f.value.value,corp_id:d.value.value,item_id:S.value.value,station_status_id:w.value,out_time:u,timer_image_link:h.value};await axios({method:"put",url:"api/stationnew",withCredentials:!0,data:e,headers:{Accept:"application/json","Content-Type":"application/json"}})},pe=async()=>{const u=b.value.replace(/\./g,"-");var e={station_status_id:w.value,out_time:u,timer_image_link:h.value};await axios({method:"put",url:"api/timer/addTimer/"+x.value,withCredentials:!0,data:e,headers:{Accept:"application/json","Content-Type":"application/json"}})},ge=async()=>{const u=b.value.replace(/\./g,"-");var e={name:o.value,system_id:f.value.value,corp_id:d.value.value,item_id:S.value.value,station_status_id:w.value,out_time:u,timer_image_link:h.value};await axios({method:"put",url:"api/timer/editStation/"+a.station.id,withCredentials:!0,data:e,headers:{Accept:"application/json","Content-Type":"application/json"}})};return(u,e)=>(F(),Ve("div",Be,[a.from==1?(F(),R(V,{key:0,color:"primary",icon:"fa-solid fa-plus",label:"Add Timer",onClick:e[0]||(e[0]=t=>_.value=!0)})):j("",!0),a.from==2?(F(),R(V,{key:1,color:"primary",icon:"fa-solid fa-clock",round:"",padding:"none",flat:"",onClick:e[1]||(e[1]=t=>_.value=!0)})):j("",!0),a.from==3?(F(),R(V,{key:2,color:"primary",icon:"fa-solid fa-pen-to-square",round:"",padding:"none",flat:"",onClick:e[2]||(e[2]=t=>_.value=!0)})):j("",!0),i(Fe,{class:"myRoundTop",onBeforeShow:e[16]||(e[16]=t=>y(P)()),"max-width":"700px",modelValue:_.value,"onUpdate:modelValue":e[17]||(e[17]=t=>_.value=t),persistent:"",onBeforeHide:e[18]||(e[18]=t=>y(H)())},{default:s(()=>[i(J,{class:"myRoundTop","max-width":"700px"},{default:s(()=>[i(Qe,{modelValue:c.value,"onUpdate:modelValue":e[15]||(e[15]=t=>c.value=t),animated:"",class:"shadow-2 rounded-borders myStationPannel"},{default:s(()=>[i(ae,{class:"q-pa-none",name:"addName"},{default:s(()=>[i(J,{class:"my-card",flat:""},{default:s(()=>[Ie,i(C,null,{default:s(()=>[Ue]),_:1}),i(C,null,{default:s(()=>[i(O,{modelValue:o.value,"onUpdate:modelValue":e[3]||(e[3]=t=>o.value=t),type:"text",label:"Structure Name",rounded:"","label-color":"webway",standout:""},null,8,["modelValue"])]),_:1}),i(le,{horizontal:"",align:"right"},{default:s(()=>[i(V,{rounded:"",color:"primary",disable:ce.value,label:"Submit",onClick:e[4]||(e[4]=t=>y(se)())},null,8,["disable"]),z(i(V,{rounded:"",color:"negative",label:"Close"},null,512),[[E]])]),_:1})]),_:1})]),_:1}),i(ae,{class:"q-pa-none myRoundTop",name:"details"},{default:s(()=>[i(J,{class:"myRoundTop",flat:""},{default:s(()=>[i(C,{class:"bg-primary text-center"},{default:s(()=>[q("h5",Me,"Enter Details for "+qe(o.value),1)]),_:1}),i(C,{class:"q-py-xs"},{default:s(()=>[i(O,{modelValue:o.value,"onUpdate:modelValue":e[5]||(e[5]=t=>o.value=t),type:"text",label:"Structure Name","label-color":"webway",rounded:"",outlined:"","hide-bottom-space":"",standout:"",readonly:y(de)()},null,8,["modelValue","readonly"])]),_:1}),i(C,{class:"q-py-xs"},{default:s(()=>[i(K,{modelValue:S.value,"onUpdate:modelValue":e[6]||(e[6]=t=>S.value=t),options:Q.value,autofocus:re.value,"option-value":"value","option-label":"text",label:"Structure Type",rounded:"",outlined:"","use-input":"",clearable:"",onFilter:y(Y),readonly:y(G)()},null,8,["modelValue","options","autofocus","onFilter","readonly"])]),_:1}),i(C,{class:"q-py-xs"},{default:s(()=>[q("div",Oe,[q("div",ze,[i(K,{modelValue:f.value,"onUpdate:modelValue":e[7]||(e[7]=t=>f.value=t),options:k.value,"option-value":"value","option-label":"text",label:"System Name",outlined:"",rounded:"","use-input":"",clearable:"",onFilter:y(L),readonly:y(G)()},null,8,["modelValue","options","onFilter","readonly"])]),q("div",Ee,[i(K,{modelValue:d.value,"onUpdate:modelValue":e[8]||(e[8]=t=>d.value=t),options:U.value,"option-value":"value","option-label":"text",label:"Corp Ticker",outlined:"",rounded:"","use-input":"",clearable:"",onFilter:y(ne),readonly:y(G)()},null,8,["modelValue","options","onFilter","readonly"]),oe.value?(F(),R(y(D),{key:0,class:"pt-3 pl-1",onMissingCorpDone:e[9]||(e[9]=t=>y(ue)())})):j("",!0)])])]),_:1}),i(ie,{inset:"",color:"webway"}),i(C,null,{default:s(()=>[Pe,i(Le,{modelValue:w.value,"onUpdate:modelValue":e[10]||(e[10]=t=>w.value=t),color:"secondary",options:$.value,inline:""},null,8,["modelValue","options"])]),_:1}),i(ie,{inset:"",color:"webway"}),i(C,null,{default:s(()=>[He,i(De,{src:v.value,alt:"My Image"},null,8,["src"]),i(O,{class:"q-pt-xs",modelValue:h.value,"onUpdate:modelValue":e[11]||(e[11]=t=>h.value=t),type:"text",label:"Selected Items Screen Shot",rounded:"","hide-bottom-space":"",outlined:"","label-color":"webway",standout:""},null,8,["modelValue"])]),_:1}),i(C,{class:"q-pt-none q-pb-none"},{default:s(()=>[Ne(" Enter Reinforced Until Timer enter "),i(O,{modelValue:b.value,"onUpdate:modelValue":e[12]||(e[12]=t=>b.value=t),mask:"####.##.## ##:##:##",type:"text","error-message":ve.value,ref:"fieldRef",label:"Reinforced unit YYYY.MM.DD hh:mm:ss",rounded:"",outlined:"",error:me.value,"label-color":"webway",standout:""},null,8,["modelValue","error-message","error"])]),_:1}),i(le,{align:"right"},{default:s(()=>[a.from!=3?z((F(),R(V,{key:0,disable:!Z.value,color:"positive",label:"Submit",onClick:e[13]||(e[13]=t=>y(ee)()),rounded:""},null,8,["disable"])),[[E]]):j("",!0),a.from==3?z((F(),R(V,{key:1,disable:!Z.value,color:"positive",label:"Update",onClick:e[14]||(e[14]=t=>y(ee)()),rounded:""},null,8,["disable"])),[[E]]):j("",!0),z(i(V,{label:"Close",rounded:"",color:"negative"},null,512),[[E]])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])]))}};export{at as default};
